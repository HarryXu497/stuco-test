import { google } from "googleapis";
import { a as PUBLIC_SPREADSHEET_ID } from "../../../../chunks/public.js";
const SECRET_CREDENTIALS = "ewogICJ0eXBlIjogInNlcnZpY2VfYWNjb3VudCIsCiAgInByb2plY3RfaWQiOiAic3R1Y28tc3ByZWFkc2hlZXQtdGVzdCIsCiAgInByaXZhdGVfa2V5X2lkIjogImNkNGMyOThiMWIxZjMxZTk1YmNmODMyMmViNDI4ZjY2YmQxMDg1ZWEiLAogICJwcml2YXRlX2tleSI6ICItLS0tLUJFR0lOIFBSSVZBVEUgS0VZLS0tLS1cbk1JSUV2Z0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktnd2dnU2tBZ0VBQW9JQkFRRFY0ZHZuLytNZWNIUGxcbkdRRHZ5V3JDMFBWQ2ZmdTVxYWYzSXlWTnNvV3A1Q2JYaUpINFhkWnMvY0hyYm92MnI5a2p3cjRBSFhRczcyYUVcbjZHYVNCdC9nRFhMMzJ5aWdpZXMyME1VZmF3a3JRYWQxekNQdGJubm1xbmUxT2pnbkZJdHVkVFdmdlNyMzRhT25cbklUK1VXUzJjM0RCMU1VMFVUb21sMlNpYnhuTjNJM3FqdTM3VEZ2Qll2MlpXbUl4WElrRFlodnlzMWc0dWpNbk1cbmYzb2p0SkFHWjJ2VkZLM1lJZkQ3SmhPYjVmaGRZYjdDRFhoZkVaSGUvNy9GKzVvdkhjS2p4dytoT3B5OVZkUW9cbk5kQW9nbE8wdmFnWGp4WUZhSitsNkpjR0xScmlkMmVNOUpNZkNtYi9Ea1ZiWDl2L1pkeEoza3Q2L3FtMDVGTXBcbitnYisyeG1oQWdNQkFBRUNnZ0VBQkVBZmttbjlyYjNFTTl0RGIwQi9EYjJXTGpBdmwrWTZVZzZXLzhjS2pIc3pcblZyNWVVTzVaSS9reFhpTFMzR3JDRGpSTHp5MUdxOXViRzR6bkl1NUk0SWRCT21kQmYxcVdVU25QZDdzZnZNWVZcbkthRzVCMlRXRTlmZDYvMEFTaTNkN1NxZVQ1MGZDanVTbzNBNm9hY0VZWFVTYjhzZkhNWklkUzBPWWZWM2x5TVVcbitlak85cC9KSk1RK2loM1BzMkVkdXZvdW1iQk1BZURNdjJqRlpHRGtTQjJOL0Y1NXZEK3ZSeWxIQmVXU3N1dHNcbnIrMDhzMU9EQ0dScFNxV1pRaGViVEpRL1dSbWtpa1o4ZEwrYXVOUDRnemhLZnRPd1dvTmZSOElaK0doVVhxMDZcblRiT3ZNeHZtOGphWFZNcFppNWZpMGpjVnVrMHRpSm1DYVNkcW1kTE1VUUtCZ1FEeHZPRWVVKzRHcE5acE1NVkhcbkh3ZEo1KzlNQ1NzS0M4bENZVGlxSjhRMGpwSllqclZtNXMzYngwamJkWDEyVUd1V3hGWUpCNHIySXJoWlZyZStcbnNxbEZqRnJvZkU0aWVzdGVvN25zK2toc2YwdUN6QlVpcG9iYUxUTEs1V2xTd0p5M0hpeWc3b1VTbHVzNjRFaWZcblpvck13cUtSUXFFS2hkNmI1dlgzZkorWEdRS0JnUURpZ0VKdUd1NlV0c3h4dDZycDZkUlltQ0JFRlQvYWk3c1Jcbmt3c0lUU0Ivc3VXMnNlRms2QXBhSUZoTE1zR1FCaWZ5T3FHc2hqK1l5aUYrYjUwK2g3T25kbG5GMEFkdGMxMG5cbitvRkVERE5BWkdFL29IT0xIMkhXSno1czhYTTRjb1doKzdMcTE4VjZoQ3Y1djJBWDkzWnNibGFOYVRaa1R5cmNcbi9ERFhqcXNQeVFLQmdRRFJNM0J1MnB1SFRHZnhxSzlSbVZ5cGJQcitob0NrdFFaN1Y3KytJYVAvQjlOR3FGbjhcbnI0ay94ZnNiVVZZK2FlSnlHMytKV09tOWtOYVJHaWJ4OVpQZ0NGTTBGejlYUDRWNFphQ2xvUVBFUVhXTHdDb2FcblRwc3RmU2dUeHUyYkcrMkQyNjBycUwrcEVzcUhyVW1zQ1FYZHBpTWlLdE5MVkFjT1RKWllrNVZaSVFLQmdFdGpcbkx6a2dnNnBCMFhoRURvSCtqdXZSN21OYXd6OEZaUVVyY08rWlpDaThyWktLVUIvYXo1OUJ4c0Y0cWs0NmprOGtcblRxMXluWFpJU0sraGpLL0VVUHA2L05SSE1rR3V0U0hhVWU0Sk5ZSElKMG9iS0huMHZ3YWRWenpCZkgwY09QZzZcbkkwbmcrVnlXNDJBajMyTDZ2WkxIZ3MxY2FIc29rbmF0QmNDcFBxeHBBb0dCQU1Fd1RQU1h0R1kyY1J2QTZvVmtcbmplNFo4UmtWT2Q5OVA2aU5XQXFyRVhiRm1va1Y3d3BLaElmTEdSUnhVOFJ3cTc1ZGo2L25TMmRSRE95bHVBbTRcbnkzNjdoaGNRa1VMQ2xtSWR2WExodGpzQzEwOFRKSkRiWTQyTUN3TU5SVjdTemtMYXNBNEdQSW12Q3RWOFpucitcbkR1ejUwRytJN2UvSjBxNU1QMjlWSmtucFxuLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLVxuIiwKICAiY2xpZW50X2VtYWlsIjogInN0dWNvLXdlYnNpdGUtdGVzdC1kYXRhQHN0dWNvLXNwcmVhZHNoZWV0LXRlc3QuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLAogICJjbGllbnRfaWQiOiAiMTE1NzM0ODkwMjEzOTU0NDYzMDUyIiwKICAiYXV0aF91cmkiOiAiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL2F1dGgiLAogICJ0b2tlbl91cmkiOiAiaHR0cHM6Ly9vYXV0aDIuZ29vZ2xlYXBpcy5jb20vdG9rZW4iLAogICJhdXRoX3Byb3ZpZGVyX3g1MDlfY2VydF91cmwiOiAiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3YxL2NlcnRzIiwKICAiY2xpZW50X3g1MDlfY2VydF91cmwiOiAiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vcm9ib3QvdjEvbWV0YWRhdGEveDUwOS9zdHVjby13ZWJzaXRlLXRlc3QtZGF0YSU0MHN0dWNvLXNwcmVhZHNoZWV0LXRlc3QuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLAogICJ1bml2ZXJzZV9kb21haW4iOiAiZ29vZ2xlYXBpcy5jb20iCn0K";
const sheets = google.sheets("v4");
const credentials = JSON.parse(
  Buffer.from(SECRET_CREDENTIALS, "base64").toString()
);
const initAuth = async () => {
  const auth = new google.auth.GoogleAuth({
    projectId: credentials.project_id,
    credentials: {
      client_email: credentials.client_email,
      private_key: credentials.private_key
    },
    scopes: ["https://www.googleapis.com/auth/spreadsheets.readonly"]
  });
  const authClient = await auth.getClient();
  google.options({
    auth: authClient
  });
};
const getSpreadSheetValues = async (spreadsheetId, sheetName) => {
  return await sheets.spreadsheets.values.get({
    spreadsheetId,
    range: sheetName
  });
};
const GET = async ({ url }) => {
  await initAuth();
  const maxResults = url.searchParams.get("maxResults");
  const range = maxResults === null ? "Events!A:C" : `Events!A1:C${+maxResults + 1}`;
  const values = (await getSpreadSheetValues(PUBLIC_SPREADSHEET_ID, range)).data.values;
  return new Response(JSON.stringify(values));
};
export {
  GET
};
